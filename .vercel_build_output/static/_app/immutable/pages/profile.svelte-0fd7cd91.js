import{S as Ee,i as Pe,s as we,k as u,e as s,t as _,_ as Ie,d as n,m as c,c as l,a as d,h as m,b as o,Q as me,g as be,H as e,L as R,I as ue,j as ye,n as je,J as Ne,w as Te}from"../chunks/index-cdcc4d05.js";function ge(i){let T,t,p,f,b,y,O,g=i[0].name+"",E,G,L,P,S,Q,F,v,K,w,V,W,X,I,N,B,Y,h,Z,D,U,$,A=i[0].email+"",C,x,z,ee,te,ae,se,le,re,H,ne,oe,ce;return{c(){T=u(),t=s("div"),p=s("h1"),f=_("Profile"),b=u(),y=s("h2"),O=_("Hello "),E=_(g),G=_("!"),L=u(),P=s("div"),S=s("p"),Q=_("Name:"),F=u(),v=s("input"),K=u(),w=s("div"),V=s("p"),W=_("Profile Picture:"),X=u(),I=s("div"),N=s("img"),Y=u(),h=s("input"),Z=u(),D=s("div"),U=s("p"),$=_("Email: "),C=_(A),x=u(),z=s("button"),ee=_("Update Details"),te=u(),ae=s("br"),se=u(),le=s("br"),re=u(),H=s("button"),ne=_("Delete Account"),this.h()},l(r){Ie('[data-svelte="svelte-1u2dft7"]',document.head).forEach(n),T=c(r),t=l(r,"DIV",{class:!0});var a=d(t);p=l(a,"H1",{});var de=d(p);f=m(de,"Profile"),de.forEach(n),b=c(a),y=l(a,"H2",{});var q=d(y);O=m(q,"Hello "),E=m(q,g),G=m(q,"!"),q.forEach(n),L=c(a),P=l(a,"DIV",{class:!0});var J=d(P);S=l(J,"P",{});var pe=d(S);Q=m(pe,"Name:"),pe.forEach(n),F=c(J),v=l(J,"INPUT",{class:!0,type:!0,label:!0}),J.forEach(n),K=c(a),w=l(a,"DIV",{class:!0});var k=d(w);V=l(k,"P",{});var fe=d(V);W=m(fe,"Profile Picture:"),fe.forEach(n),X=c(k),I=l(k,"DIV",{class:!0});var M=d(I);N=l(M,"IMG",{src:!0,alt:!0}),Y=c(M),h=l(M,"INPUT",{type:!0,alt:!0,class:!0}),M.forEach(n),k.forEach(n),Z=c(a),D=l(a,"DIV",{class:!0});var ve=d(D);U=l(ve,"P",{});var ie=d(U);$=m(ie,"Email: "),C=m(ie,A),ie.forEach(n),ve.forEach(n),x=c(a),z=l(a,"BUTTON",{});var he=d(z);ee=m(he,"Update Details"),he.forEach(n),te=c(a),ae=l(a,"BR",{}),se=c(a),le=l(a,"BR",{}),re=c(a),H=l(a,"BUTTON",{class:!0});var _e=d(H);ne=m(_e,"Delete Account"),_e.forEach(n),a.forEach(n),this.h()},h(){document.title="Profile",o(v,"class","text-input svelte-9zjfm3"),o(v,"type","text"),o(v,"label","Name: "),o(P,"class","row svelte-9zjfm3"),me(N.src,B=i[0].avatar)||o(N,"src",B),o(N,"alt",""),o(h,"type","text"),o(h,"alt",""),o(h,"class","svelte-9zjfm3"),o(I,"class","pfp-input svelte-9zjfm3"),o(w,"class","row svelte-9zjfm3"),o(D,"class","row svelte-9zjfm3"),o(H,"class","button-red svelte-9zjfm3"),o(t,"class","content svelte-9zjfm3")},m(r,j){be(r,T,j),be(r,t,j),e(t,p),e(p,f),e(t,b),e(t,y),e(y,O),e(y,E),e(y,G),e(t,L),e(t,P),e(P,S),e(S,Q),e(P,F),e(P,v),R(v,i[1]),e(t,K),e(t,w),e(w,V),e(V,W),e(w,X),e(w,I),e(I,N),e(I,Y),e(I,h),R(h,i[2]),e(t,Z),e(t,D),e(D,U),e(U,$),e(U,C),e(t,x),e(t,z),e(z,ee),e(t,te),e(t,ae),e(t,se),e(t,le),e(t,re),e(t,H),e(H,ne),oe||(ce=[ue(v,"input",i[4]),ue(h,"input",i[5]),ue(z,"click",i[3])],oe=!0)},p(r,[j]){j&1&&g!==(g=r[0].name+"")&&ye(E,g),j&2&&v.value!==r[1]&&R(v,r[1]),j&1&&!me(N.src,B=r[0].avatar)&&o(N,"src",B),j&4&&h.value!==r[2]&&R(h,r[2]),j&1&&A!==(A=r[0].email+"")&&ye(C,A)},i:je,o:je,d(r){r&&n(T),r&&n(t),oe=!1,Ne(ce)}}}const ze=async({session:i})=>i.sessionId===void 0?{status:302,redirect:"/"}:{status:200};function De(i,T,t){let p={id:"",name:"",email:"",avatar:""},f,b;Te(async()=>{const E=await fetch("/api/user",{method:"POST",body:JSON.stringify({type:"getUser",id:(await(await fetch("/api/auth")).json()).email}),headers:{"Content-Type":"application/json"}});t(0,p=await E.json()),t(1,f=p.name),t(2,b=p.avatar)});const y=async()=>{console.log(f);const E=await fetch("/api/user",{method:"PATCH",body:JSON.stringify({type:"updateUser",id:(await(await fetch("/api/auth")).json()).email,newName:f,newAvatar:b}),headers:{"Content-Type":"application/json"}});console.log(await E.json()),location.reload()};function O(){f=this.value,t(1,f)}function g(){b=this.value,t(2,b)}return[p,f,b,y,O,g]}class He extends Ee{constructor(T){super(),Pe(this,T,De,ge,we,{})}}export{He as default,ze as load};
